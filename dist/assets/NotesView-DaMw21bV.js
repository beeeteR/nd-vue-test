import{v as h,x as m,A as N,d as $,y as x,s as C,a as T,z as S,r as b,f as i,g as M,w as f,h as e,i as g,B as D,_ as I,l as v,m as _,F as V,n as A,t as w,j as z,o as E}from"./index-P6IOASBX.js";import{_ as F,a as y,b as H}from"./UserInput.vue_vue_type_style_index_0_lang-ZSf49ICO.js";const L="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1%209H17M9%201L9%2017'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e",k={get:{getNotes:"notes"},post:{createNote:"notes"},delete:{deleteNote:t=>`notes/${t}`}},B={getNotes:t=>h(m.get(N.url+k.get.getNotes,{headers:{Authorization:`Bearer ${t}`}})),createNote:(t,s)=>h(m.post(N.url+k.post.createNote,t,{headers:{Authorization:`Bearer ${s}`}})),deleteNote:(t,s)=>h(m.delete(N.url+k.delete.deleteNote(t),{headers:{Authorization:`Bearer ${s}`}}))},j={class:"dialog-create-note__form"},q={key:0,class:"dialog__errors"},G={class:"--text-small"},P=$({__name:"DialogCreateNote",setup(t){const s=x(),c=C();let l=T();const u=S().cookies.get("accessToken"),n=b({title:"",content:""});function o(d,a){n[a]=d}function r(){B.createNote(n,u).then(d=>{if(d.error)l.value=d.errorMessage;else{const a=d.data;s.setNote(a),n.title="",n.content="",c.changeModalState()}})}return(d,a)=>(i(),M(F,null,{dialogHeader:f(()=>a[2]||(a[2]=[e("h2",null,"Добавление заметки",-1)])),dialogBody:f(()=>[e("form",j,[g(y,{title:"Название заметки",type:"input",inputType:"text",placeholder:"Введите название",length:{min:1,max:64},"show-length":"",onChangeValueInput:a[0]||(a[0]=p=>o(p,"title"))}),g(y,{title:"Текст заметки",type:"area",placeholder:"Введите текст",length:{min:1,max:255},"show-length":"",onChangeValueInput:a[1]||(a[1]=p=>o(p,"content"))}),g(I,{title:"Добавить",onClick:D(r,["prevent"]),class:"dialog-create-note__form-btn"})])]),dialogFooter:f(()=>[v(l)?(i(),_("div",q,[(i(!0),_(V,null,A(v(l),p=>(i(),_("div",{class:"error__message",key:Date.now()},[e("span",G,w(p),1)]))),128))])):z("",!0)]),_:1}))}}),J={class:"note"},K={class:"note__header"},O={class:"note__title"},Q={class:"note__body"},R={class:"--text"},U=$({__name:"BaseNote",props:{id:{},title:{},content:{}},setup(t){const s=t,c=S().cookies.get("accessToken"),l=x();function u(){B.deleteNote(s.id,c).then(()=>{l.delNote(s.id)})}return(n,o)=>(i(),_("div",J,[e("div",K,[e("h4",O,w(n.title),1)]),e("div",Q,[e("p",R,w(n.content),1)]),e("div",{class:"note__footer"},[e("div",{class:"note__delete",onClick:u},o[0]||(o[0]=[e("img",{src:H,alt:"Delete note icon"},null,-1),e("span",{class:"--text"},"Удалить",-1)]))]),o[1]||(o[1]=e("div",{class:"note__angle"},null,-1))]))}}),W={class:"page-notes section-wrapper"},X={class:"notes__items"},ee=$({__name:"NotesView",setup(t){const s=C(),c=x(),l=S().cookies.get("accessToken");E(()=>{B.getNotes(l).then(n=>{n.data.forEach(r=>c.setNote(r))})});function u(){s.changeModalState()}return(n,o)=>(i(),_("div",W,[e("div",X,[(i(!0),_(V,null,A(v(c).getNotes,r=>(i(),M(U,{title:r.title,content:r.content,id:r.id,key:r.id},null,8,["title","content","id"]))),128))]),e("div",{class:"notes__btn-add-notes",onClick:u},o[0]||(o[0]=[e("img",{src:L,alt:"add notes btn"},null,-1)])),g(P)]))}});export{ee as default};
